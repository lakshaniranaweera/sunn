<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Spin Wheel Game - 6 Segments</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --wheel-size: 85vw;
      --spin-time: 4s;
      --wheel-offset-y: 220px;     
      --button-offset-y: 260px;    
      --winner-img-width: 600px;
      --winner-img-height: 600px;
      --winner-img-top: 40%;
      --winner-img-left: 20%;
    }
    html,body{
      width:100%;
      height:100%;
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: url('22.png') center/cover no-repeat;
      color:#fff;
      display:flex;
      justify-content:center;
      align-items:center;
    }

    .bg-overlay{
      position:fixed;
      inset:0;
      z-index:0;
    }

    .wheel-center {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 25%;
      height: 25%;
      border-radius: 50%;
      background: url('9.png') center/cover no-repeat;
      transform: translate(-50%, -50%);
      z-index: 15;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

    .container-game{
      position:relative;
      z-index:1;
      width:100%;
      max-width:1080px;
      height:1920px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      box-sizing:border-box;
    }

    .wheel-wrap{
      margin: 20px auto;
      width: var(--wheel-size);
      height: var(--wheel-size);
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:50%;
      background: radial-gradient(circle at center, rgba(255,255,255,0.02), transparent 40%);
      overflow:hidden;
      transform: translateY(var(--wheel-offset-y));
    }

    .wheel{
      width:100%;
      height:100%;
      border-radius:50%;
      position:relative;
      transition: transform var(--spin-time) cubic-bezier(.17,.84,.44,1);
    }

    .wheel-segment {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      transform-origin: 50% 50%;
      mask-image: conic-gradient(from -30deg, black 0deg 60deg, transparent 60deg 360deg);
    }

    .pointer {
      position: absolute;
      top: 660px;
      left: 50%;
      transform: translateX(-50%) rotate(180deg);
      width: 0;
      height: 0;
      border-left: 80px solid transparent;
      border-right: 80px solid transparent;
      border-bottom: 100px solid #fff;
      z-index: 20;
      filter: drop-shadow(0 4px 10px rgba(0,0,0,0.6));
    }

    .btn-start {
      position: absolute;
      top: calc(80% + var(--button-offset-y));
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      height: 120px;
      font-weight: 700;
      letter-spacing: 0.06em;
      font-size: 4.4rem;
      border-radius: 12px;
      z-index: 100;
      background: linear-gradient(145deg, #f7d848 , #f7d848 );
      color: #fff;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
      box-shadow: 0 6px 0 #9b1c4b , 0 6px 12px rgba(0,0,0,0.4), inset 0 -3px 5px rgba(0,0,0,0.2);
    }

    .btn-start:hover {
      transform: translate(-50%, -50%) translateY(-3px) scale(1.05);
      box-shadow: 0 10px 0 #9b1c4b , 0 12px 20px rgba(0,0,0,0.5), inset 0 -3px 5px rgba(0,0,0,0.2);
    }

    .btn-start:active {
      transform: translate(-50%, -50%) translateY(2px) scale(0.98);
      box-shadow: 0 4px 0 #9b1c4b , 0 6px 12px rgba(0,0,0,0.3), inset 0 -2px 4px rgba(0,0,0,0.2);
    }

    @keyframes shadowPulse {
      0% { box-shadow: 0 6px 0 #9b1c4b , 0 6px 12px rgba(0,0,0,0.4), inset 0 -3px 5px rgba(0,0,0,0.2); }
      50% { box-shadow: 0 8px 0 #9b1c4b , 0 10px 16px rgba(0,0,0,0.45), inset 0 -3px 5px rgba(0,0,0,0.2); }
      100% { box-shadow: 0 6px 0 #9b1c4b , 0 6px 12px rgba(0,0,0,0.4), inset 0 -3px 5px rgba(0,0,0,0.2); }
    }

    .btn-start {
      animation: shadowPulse 2s infinite ease-in-out;
    }

    .game-card > .small-muted { display: none !important; }

    .settings-btn{
      position:fixed;
      right:18px;
      bottom:18px;
      z-index:2000;
      width:60px;
      height:60px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(180deg, #ffffff10, #ffffff05);
      border:1px solid rgba(255,255,255,0.08);
      box-shadow: 0 8px 20px rgba(0,0,0,0.5);
      backdrop-filter: blur(6px);
      cursor:pointer;
    }
    .settings-btn i{ font-size:1.5rem; color:#fff; }

    @keyframes zoomBlink {
      0% { transform: scale(0.8); opacity:0.5; }
      50% { transform: scale(1.2); opacity:1; }
      100% { transform: scale(1); opacity:0.8; }
    }

.winner-img {
  width: var(--winner-img-width);
  height: var(--winner-img-height);
  object-fit: contain;
  position: absolute;
  top: var(--winner-img-top);
  left: var(--winner-img-left);
  transform: translate(-50%, -50%);
  animation: zoomBlink 1s ease-in-out infinite;
}

  </style>
</head>
<body>

<div class="bg-overlay"></div>
<div class="pointer" id="pointer"></div>

<div class="container-game">
  <div class="game-card">
    <div class="wheel-wrap mx-auto">
      <div class="wheel" id="wheel">
        <div class="wheel-segment" style="transform: rotate(0deg); background-image:url('E.png');"></div>
        <div class="wheel-segment" style="transform: rotate(60deg); background-image:url('c.png');"></div>
        <div class="wheel-segment" style="transform: rotate(120deg); background-image:url('t.png');"></div>
        <div class="wheel-segment" style="transform: rotate(180deg); background-image:url('tt.png');"></div>
        <div class="wheel-segment" style="transform: rotate(240deg); background-image:url('s.png');"></div>
        <div class="wheel-segment" style="transform: rotate(300deg); background-image:url('t.png');"></div>
      </div>
      <div class="wheel-center"></div>
    </div>

    <button class="btn btn-lg btn-primary btn-start" id="startBtn">START</button>
    <p class="small-muted mt-2">Total plays: <span id="totalPlays">0</span> â€” Wins: <span id="totalWins">0</span></p>
  </div>
</div>

<div class="offcanvas offcanvas-end text-dark" tabindex="-1" id="adminPanel" aria-labelledby="adminPanelLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="adminPanelLabel">Admin Settings</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <h6>Statistics</h6>
    <ul class="list-group mb-3">
      <li class="list-group-item d-flex justify-content-between align-items-center">
        Total Plays <span id="statPlays" class="badge bg-primary rounded-pill">0</span>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        Total Wins <span id="statWins" class="badge bg-success rounded-pill">0</span>
      </li>
      <li class="list-group-item">
        <div class="mb-1 fw-semibold">Per-segment wins</div>
        <div class="d-flex flex-column gap-1" id="segmentList"></div>
      </li>
    </ul>

    <h6>Winner Counts</h6>
    <div class="mb-3" id="segmentControls"></div>

    <h6>Controls</h6>
    <div class="mb-3">
      <label class="form-label">Spin duration (seconds)</label>
      <input type="number" id="spinDurationInput" class="form-control" min="1" max="12" step="0.5" value="4">
      <div class="form-text">Higher = slower spin.</div>
    </div>

    <div class="mb-3">
      <button id="resetCounts" class="btn btn-danger">Reset All Counts</button>
      <button id="saveAdmin" class="btn btn-success mt-2">Save Settings</button>
    </div>
  </div>
</div>

<div class="settings-btn" data-bs-toggle="offcanvas" data-bs-target="#adminPanel" aria-controls="adminPanel" title="Settings / Admin">
  <i class="bi-gear">&#9881;</i>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
(function(){
  const wheel = document.getElementById('wheel');
  const startBtn = document.getElementById('startBtn');

  let currentRotation = 0;
  let spinning = false;

  // Winner videos
  const winnerVideos = ['Er.mp4','cap.mp4','try.mp4','Sh.mp4','Sc.mp4','try.mp4'];
  let sequenceIndex = 0;

  function showVideo(index){
    const existing = document.getElementById('winnerPopup');
    if(existing) existing.remove();

    const videoSrc = winnerVideos[index];

    const winnerDiv = document.createElement('div');
    winnerDiv.id = 'winnerPopup';
    winnerDiv.style.position = 'fixed';
    winnerDiv.style.inset = '0';
    winnerDiv.style.background = 'rgba(0,0,0,0.8)';
    winnerDiv.style.display = 'flex';
    winnerDiv.style.alignItems = 'center';
    winnerDiv.style.justifyContent = 'center';
    winnerDiv.style.zIndex = '9999';
    winnerDiv.innerHTML = `
      <video width="100%" height="100%" autoplay muted playsinline style="object-fit:cover;">
        <source src="${videoSrc}" type="video/mp4">
      </video>
    `;
    document.body.appendChild(winnerDiv);

    setTimeout(() => { winnerDiv.remove(); }, 6000); // show for 6 seconds
  }

  startBtn.addEventListener('click', async function(){
    if(spinning) return;
    spinning = true;
    startBtn.disabled = true;

    const chosen = sequenceIndex;
    sequenceIndex = (sequenceIndex + 1) % winnerVideos.length;

    // Medium speed spin for 6 seconds
    const spinTime = 6000; // 6 seconds
    const rotations = 3 * (spinTime / 1000); // 3 rotations/sec, adjust as needed
    const angle = rotations * 360;
    currentRotation += angle;

    wheel.style.transition = `transform ${spinTime/1000}s linear`; // same speed
    requestAnimationFrame(() => { wheel.style.transform = `rotate(${currentRotation}deg)`; });

    // Wait 6 seconds then show winner video
    await new Promise(res => setTimeout(res, spinTime));

    showVideo(chosen);

    spinning = false;
    startBtn.disabled = false;
  });

})();
</script>

</body>
</html>
